services:
  pdf_gpt_chat.form:
    class: Drupal\pdf_gpt_chat\Form\PdfGptChatForm
    arguments: ['@http_client', '@config.factory', '@file_system', '@messenger', '@file.validator', '@pdf_gpt_chat.pdf_parser', '@pdf_gpt_chat.openai', '@pdf_gpt_chat.chat_history', '@pdf_gpt_chat.message_formatter', '@cache.default']
    tags:
      - { name: form }

  pdf_gpt_chat.pdf_parser:
    class: Drupal\pdf_gpt_chat\Service\PdfParserService
    arguments: ['@file_system', '@cache.default', '@pdf_gpt_chat.logging']

  pdf_gpt_chat.openai:
    class: Drupal\pdf_gpt_chat\Service\OpenAIService
    arguments: ['@http_client', '@config.factory', '@cache.default', '@logger.factory', '@pdf_gpt_chat.logging']

  pdf_gpt_chat.chat_history:
    class: Drupal\pdf_gpt_chat\Service\ChatHistoryService
    arguments: ['@state', '@pdf_gpt_chat.logging']

  pdf_gpt_chat.message_formatter:
    class: Drupal\pdf_gpt_chat\Service\MessageFormatterService

  pdf_gpt_chat.chat_processor:
    class: Drupal\pdf_gpt_chat\Service\ChatProcessorService
    arguments: ['@pdf_gpt_chat.pdf_parser', '@pdf_gpt_chat.openai', '@pdf_gpt_chat.chat_history', '@pdf_gpt_chat.message_formatter', '@pdf_gpt_chat.logging']

  pdf_gpt_chat.error_handler:
    class: Drupal\pdf_gpt_chat\Service\ErrorHandlerService
    arguments: ['@pdf_gpt_chat.logging']

  pdf_gpt_chat.file_handler:
    class: Drupal\pdf_gpt_chat\Service\FileHandlerService
    arguments: ['@file.validator', '@pdf_gpt_chat.logging']

  pdf_gpt_chat.logging:
    class: Drupal\pdf_gpt_chat\Service\LoggingService
    arguments: ['@logger.factory']